
<!DOCTYPE html>
<html lang="fr-FR">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Blog d&#39;un artisan développeur">
    <title>Tag: lets-encrypt - Blog d&#39;un artisan développeur</title>
    <meta name="author" content="Pierre PIRONIN">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta property="og:type" content="blog">
<meta property="og:title" content="Blog d'un artisan développeur">
<meta property="og:url" content="http://pierrepironin.fr/tags/lets-encrypt/index.html">
<meta property="og:site_name" content="Blog d'un artisan développeur">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Blog d'un artisan développeur">
<meta name="twitter:creator" content="@PierrePIRONIN">
    
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/7e1107690f34c749ba1ca5b05b7e18c5?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-70817000-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">Blog d&#39;un artisan développeur</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/7e1107690f34c749ba1ca5b05b7e18c5?s=90"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="1">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/7e1107690f34c749ba1ca5b05b7e18c5?s=110"/>
            </a>
            <span class="sidebar-profile-name">Pierre PIRONIN</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Accueil</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archive</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Rechercher</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">À propos</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/PierrePIRONIN" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/PierrePIRONIN" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="http://fr.linkedin.com/in/pierrepironin" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">LinkedIn</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:pierre@pierrepironin.fr" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/Let-s-encrypt/">Let&#39;s Encrypt your Nginx !</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sat Dec 05 2015 13:20:36 GMT+0100">
	
		    05 décembre 2015
    	
    </time>
    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <p><a href="https://letsencrypt.org/" target="_blank" rel="external">Let’s Encrypt</a> est un projet d’autorité de certification gratuite, automatisé et libre.</p>
<p>Concrètement, cela nous permet notamment d’avoir des sites et applications web en https, reconnues comme dignes de confiance par les navigateurs internet. Et cela sans payer et surtout basé sur des logiciels <a href="https://github.com/letsencrypt" target="_blank" rel="external">open source</a> !</p>
<p>La beta est ouverte au public depuis jeudi, j’en ai donc profité pour remplacer les certificats auto-signés de mon GitLab sous Nginx par de vrais certificats “made by” <em>Let’s Encrypt</em>.</p>
<h3 id="Installation-et-generation-des-certificats"><a href="#Installation-et-generation-des-certificats" class="headerlink" title="Installation et génération des certificats"></a>Installation et génération des certificats</h3><p>L’installation de <em>Let’s Encrypt</em> est simple, il suffit de cloner le <em>repository</em> et de lancer un script qui va installer la bonne version du logiciel selon l’OS.<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git clone https://github.com/letsencrypt/letsencrypt</div><div class="line">cd letsencrypt</div><div class="line">./letsencrypt-auto --help</div></pre></td></tr></table></figure></p>
<p>La cible de <em>Let’s Encrypt</em> est de fournir un service permettant d’automatiser la génération des certificats et leur renouvellement. Cela marche bien pour un serveur <a href="https://letsencrypt.org/howitworks" target="_blank" rel="external">Apache</a> mais pas encore pour <a href="http://nginx.org/" target="_blank" rel="external">Nginx</a> (ne pas oublier que c’est une beta).</p>
<p>On va donc lui demander de seulement générer les certifacts et de ne pas tout gérer. Pour cela, il suffit de stopper Nginx (la coupure ne sera pas très longue) et lancer la génération du certificat pour son domaine.<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo nginx -s stop</div><div class="line"></div><div class="line">./letsencrypt-auto certonly --standalone -d my-gitlab-domain.fr -d www.my-gitlab-domain.fr</div></pre></td></tr></table></figure></p>
<p>Et voilà, les certifacts sont prềts dans <code>/etc/letsencrypt/live/my-gitlab-domain.fr/</code></p>
<h3 id="Redemarrer-nginx-et-configurer-le-domaine"><a href="#Redemarrer-nginx-et-configurer-le-domaine" class="headerlink" title="Redémarrer nginx et configurer le domaine"></a>Redémarrer nginx et configurer le domaine</h3><p>On redémarre le service Nginx.<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo service nginx start</div></pre></td></tr></table></figure></p>
<p>Et on modifie la configuration de notre serveur Nginx.<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">server &#123;</div><div class="line">	listen 443;</div><div class="line">	listen [::]:443;</div><div class="line"></div><div class="line">	# Make site accessible from http://localhost/</div><div class="line">	server_name www.my-gitlab-domain.fr my-gitlab-domain.fr;</div><div class="line"></div><div class="line">	ssl on;</div><div class="line">  ssl_certificate /etc/letsencrypt/live/my-gitlab-domain.fr/cert.pem;</div><div class="line">  ssl_certificate_key /etc/letsencrypt/live/my-gitlab-domain.fr/privkey.pem;</div><div class="line"></div><div class="line">  ssl_stapling on;</div><div class="line">  ssl_stapling_verify on;</div><div class="line">  ssl_trusted_certificate /etc/letsencrypt/live/my-gitlab-domain.fr/fullchain.pem;</div><div class="line"></div><div class="line">	location / &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>On recharge la configuration pour qu’elle soit prise en compte par Nginx.<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo ngnix -s reload</div></pre></td></tr></table></figure></p>
<p>Le tour est joué !</p>
<h3 id="Renouvellement"><a href="#Renouvellement" class="headerlink" title="Renouvellement"></a>Renouvellement</h3><p>Le certificat est valide pour 60 jours et sans renouvellement automatique pour Nginx pour l’instant, il suffira de relancer la commande pour le renouveller.<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">./letsencrypt-auto certonly --standalone -d my-gitlab-domain.fr -d www.my-gitlab-domain.fr</div></pre></td></tr></table></figure></p>
<p>Sources:</p>
<ul>
<li><a href="https://letsencrypt.org/howitworks/" target="_blank" rel="external">https://letsencrypt.org/howitworks/</a></li>
<li><a href="https://community.letsencrypt.org/t/nginx-installation/3502/5" target="_blank" rel="external">https://community.letsencrypt.org/t/nginx-installation/3502/5</a></li>
</ul>

                        
                            

                        
                        
                            <p>
                                <a href="/Let-s-encrypt/#post-footer" class="postShorten-excerpt_link link">
                                    Commenter et partager
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page sur</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 Pierre PIRONIN. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        <!-- Define author's picture -->


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/7e1107690f34c749ba1ca5b05b7e18c5?s=110"/>
        
            <h4 id="about-card-name">Pierre PIRONIN</h4>
        
            <h5 id="about-card-bio"><p><em><p>J’ai créé ce blog pour parler de ce qui se passe autour de moi dans le domaine du génie logiciel. <br/>J’exposerai mes devs, mes idées, mes lectures, les faits qui m’intéressent et les événements auxquels je participe.</p> <p>Bonne lecture !</p></em></p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Artisan développeur</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Auvergne, France
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/32.png');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js"></script>
<!--SCRIPTS END-->


    <script type="text/javascript">
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
            e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','SPYDojLAixz-siwDiSoz','2.0.0');
    </script>


</html>
